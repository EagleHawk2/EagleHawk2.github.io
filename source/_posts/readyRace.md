---
title: ğŸ’¯èµ›å‰æ•´ç†
date: 2023-07-19 21:52:15
tags:
categories: Race
---

# ğŸ’¯èµ›å‰æ•´ç†





## ğŸ¥‡æ•°æ®å¯è§†åŒ–





### ğŸ•å‰ç½®é…ç½®

---

***

#### ğŸš©vue.config.js

***

##### ğŸ¤å…³é—­è¯­æ³•æ£€æµ‹

```
lintOnSave:false
```

æ²¡æœ‰å…³é—­è¯­æ³•æ£€æµ‹ä¼šå¯¼è‡´`echarts`å¼•ç”¨æ—¶å‡ºç°æŠ¥é”™ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦é…ç½®çš„ä¿¡æ¯æ˜¯å…³é—­è¯­æ³•æ£€æµ‹

***

##### ğŸ˜è·¨åŸŸ

```js
devServer:{
	proxy:{
		"/api":{
			target:"æ¥å£åœ°å€",
            ws:true,
            changeOrigin:true,
            pathRewrite;{
                "^/api":""
            }
		}
	}
}
```

`target`ï¼šæ¥å£çš„åœ°å€ï¼Œä¼šç»™å®šæ•°æ®æ¥å£ã€‚

`ws`ï¼šwebstocketåè®®ï¼ŒåŒå‘é€šé“ï¼Œåœ¨ä¼ è¾“é€Ÿåº¦ä¸Šä¼˜äºhttpåè®®ã€‚

`changeOrigin`ï¼šdevServerä¸­ï¼Œproxyçš„changeOriginæ˜¯falseï¼šchangeOriginè¯·æ±‚å¤´ä¸­hostä»ç„¶æ˜¯æµè§ˆå™¨å‘é€è¿‡æ¥çš„hostï¼›å¦‚æœè®¾ç½®æˆtrueï¼šå‘é€è¯·æ±‚å¤´ä¸­hostä¼šè®¾ç½®æˆtargetã€‚åœ¨vue-cli3ä¸­ï¼Œé»˜è®¤changeOriginçš„å€¼æ˜¯true,æ„å‘³ç€hostè®¾ç½®æˆtargetï¼Œè¿™ä¸cue-cli2ä¸ä¸€è‡´ï¼Œvue-cli2è¿™ä¸ªé»˜è®¤å€¼æ˜¯falseã€‚

`pathRewrite`ï¼šé‡å†™ç­–ç•¥ï¼Œåœ¨targetåä¼šå­˜åœ¨å…¶ä»–å‚æ•°ï¼Œä»¥/apiå»æ·»åŠ ï¼Œä½†æ˜¯æ·»åŠ åˆ°å…·ä½“çš„æ¥å£ä¸­æ²¡æœ‰/apiè¿™å‡ ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²åœ¨ä¼ å…¥å‚æ•°çš„æ—¶å€™ä»£æ›¿/apiã€‚

***

---

#### ğŸš©å…¨å±€é…ç½®

***

##### ğŸ¤”æ•°æ®è¯·æ±‚

postè¯·æ±‚å’Œgetè¯·æ±‚ï¼Œä¸¤ä¸ªè¯·æ±‚æ–¹å¼çš„è¯·æ±‚æ–¹æ³•å¤§è‡´ç›¸åŒï¼Œåœ¨è¯·æ±‚æ—¶ï¼Œ`method`å‚æ•°å†…æ ¹æ®å¡«å…¥çš„å‚æ•°ä¸åŒæ¥è¿›è¡Œä¸åŒçš„è¯·æ±‚ã€‚

postè¯·æ±‚æœ‰è¯·æ±‚ä½“ï¼Œåœ¨å®‰å…¨æ–¹é¢è¦é«˜äºgetè¯·æ±‚

```
axios:({
	method:"get",
	url:"/api/å‚æ•°api"
})
```

ä½¿ç”¨axiosè¿›è¡Œæ•°æ®è¯·æ±‚ï¼Œåœ¨è¯·æ±‚å‰ï¼Œå¯ä»¥åˆ©ç”¨postmanå·¥å…·è¿›è¡Œæ•°æ®æ¥å£çš„è°ƒç”¨ï¼Œæ£€æŸ¥æ— è¯¯åä½¿ç”¨axiosè¿›è¡Œæ•°æ®è¯·æ±‚ã€‚getè¯·æ±‚éœ€è¦é…ç½®å‚æ•°`method`å’Œå‚æ•°`url`ã€‚å‰è€…æ˜¯è¯·æ±‚ç±»å‹ï¼Œåè€…æ˜¯apiå‚æ•°ã€‚

```
axios:({
	method:"post",
	url:"/api/å‚æ•°api",
	data:{
		startTime: yyyy.MM.dd,
		endTime: yyyy.MM.dd
	}
})
```

postè¯·æ±‚ç›¸å¯¹äºgetè¯·æ±‚å¤šäº†ä¸€ä¸ªbodyè¯·æ±‚ä½“çš„å†…å®¹ï¼Œè¯¥å†…å®¹å­˜æ”¾åœ¨`data`å‚æ•°ä¸­ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é¢å¤–åŠ å…¥çš„å†…å®¹ã€‚

åœ¨postmanä¸­ï¼Œéœ€è¦æ ¹æ®é¢˜ç›®æ¥è¿›è¡Œè®¾ç½®ï¼Œä¸€èˆ¬bodyä¸­ï¼Œä¼ å…¥çš„å‚æ•°ç±»å‹ä¸º`json`ç±»å‹ï¼Œè¿”å›ç±»å‹ä¹Ÿä¸º`json`ç±»å‹ã€‚

***



### ğŸ•‘ç”µå•†

***

***

#### ğŸš©æŸ±çŠ¶å›¾

***

##### ğŸ˜æ•°æ®å¤„ç†

- **ğŸ¤‘æ¶ˆè´¹é¢æœ€é«˜/æœ€ä½çš„çœä»½/åœ°åŒº**

**éœ€æ±‚åˆ†æï¼š**å­—æ®µé€‰æ‹©æ¶ˆè´¹é¢ã€çœä»½/åœ°åŒºã€‚æ±‚æ¶ˆè´¹é¢çš„æœ€å¤§å’Œæœ€å°å€¼çš„æ€»å’Œï¼Œå•ä¸€ç´¯åŠ å¤„ç†ï¼Œè€ƒè™‘ä½¿ç”¨Mapå¯¹è±¡çš„getå’Œsetæ–¹æ³•æ¥æ‹¿åˆ°æ¶ˆè´¹é¢æ€»é¢ã€‚ç´¯åŠ åéœ€è¦è¿›è¡Œæ’åºï¼Œmapæ²¡æœ‰å†…ç½®çš„æ’åºæ–¹æ³•ï¼Œå°†mapå¯¹è±¡è½¬ä¸ºæ•°ç»„åè¿›è¡Œæ’åºå¤„ç†ï¼Œå–å‰å‡ ä½æˆ–åå‡ ä½ä½¿ç”¨spliceæ–¹æ³•è¿›è¡Œç­›é€‰ã€‚

**ç´¯åŠ å¤„ç†ï¼š**

```js
//ç´¯åŠ å¤„ç† åˆ©ç”¨mapå¯¹è±¡çš„setå’Œgetæ–¹æ³•
var map1 = new Map()
data.forEach((e) =>{
    //åˆ¤æ–­å¯¹è±¡ä¸­æ˜¯å¦å«æœ‰çœä»½å­—æ®µï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿›è¡Œç´¯åŠ ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°
	if(map1.has(e.proviceName)){
        var tmp = map1.get(e.proviceName) + e.consumptionAmount
        map1.set(e.proviceName , tmp)
    }else{
        map1.set(e.proviceName , e.consumptionAmount)
    }
})
```

**æ’åºç­›é€‰å¤„ç†ï¼š**

```js
//å¯¹è±¡è½¬ä¸ºæ•°ç»„
map1 = Array.from(map1)
map1.sort((a,b) =>{
    //é™åºï¼Œå‡åºå†™æ³•åˆ™ç›¸åï¼Œå› ä¸ºä¸ºäºŒç»´æ•°ç»„ï¼Œå¤„ç†æ•°æ®ä¸ºç¬¬äºŒä½ï¼Œæ‰€ä»¥è¿”å›ä¸‹æ ‡ä¸º1
    //sort()æ–¹æ³•å†™æ³•å¿…é¡»æ˜¯returnè¿”å›ï¼Œå¦åˆ™ä¸ä¼šè¿›è¡Œå¤„ç†
    return b[1] - a[1]
}).splice(5)
//ç»§ç»­ä½¿ç”¨splice()æ–¹æ³•ç­›é€‰å‡ºå‰äº”çš„æ•°æ®
```

***

- **ğŸ˜å„ä¸ªçœä»½/åœ°åŒºæ¶ˆè´¹é¢çš„å¹³å‡æ•°**

**éœ€æ±‚åˆ†æï¼š**é€‰æ‹©å­—æ®µçœä»½/åœ°åŒºã€æ¶ˆè´¹é¢ã€‚éœ€è¦æ±‚å¹³å‡çš„æ¶ˆè´¹é¢ï¼Œåªéœ€è¦ä½¿ç”¨mapæ–¹æ³•æå–åˆ°å¯¹åº”æ¶ˆè´¹é¢çš„æ¯ä¸€æ¡æ•°æ®ï¼Œç„¶åå°†æ‰€æœ‰æ•°æ®ç´¯åŠ å†é™¤ä»¥æ•°æ®æ¡æ•°ï¼ŒåŒæ—¶åœ¨è¿™ä¸€æ­¥å¯ä»¥è¿›è¡Œä¿ç•™å°æ•°ç‚¹çš„æ“ä½œï¼Œå³å¯ç®—å‡ºæ­¤çœä»½/åœ°åŒºçš„å¹³å‡æ¶ˆè´¹é¢ã€‚

**æå–æ•°æ®åˆ°æ•°ç»„ä¸­ï¼š**

```js
var map1 = new Map()
data.forEach((e) =>{
    if(map1.has(e.proviceName)){
        //å’Œç´¯åŠ ç±»ä¼¼ï¼Œåªæ˜¯æ­¤æ—¶ä¼ å…¥çš„mapå¯¹è±¡ä¸­ï¼Œå¯¹åº”çš„valueå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚
        var tmp1 = []
        tmp1 = map1.get(e.proviceName)
        tmp1.push(e.consumptionAmount)
        map1.set(e.proviceName , tmp1)
    }else{
        //è¿™é‡Œå¦‚æœç¬¬äºŒä½ä¸ç”¨[]åŒ…è£¹ï¼Œtmp1æ— æ³•pushä»»ä½•æ•°æ®
        //å¦‚æœè¿™é‡Œä¸ç”¨[]åŒ…è£¹ï¼Œåˆ™éœ€è¦å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥æ¥æ”¶[e.consumptionAount]
        map.set(e.proviceName , [e.consumptionAmount])
    }
})
```

**æ±‚å¹³å‡æ•°å¤„ç†ï¼š**

```js
//å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥æ”¶é›†æ±‚å¹³å‡å€¼åçš„æ•°æ®
var compare = []

map1.forEach((v,k)){
	var sum = 0
	v.forEach((e) =>{
        //æ±‚æ€»æ•°
		sum += e
	})
    //æ±‚å¹³å‡æ•°ï¼ŒåŒæ—¶ä¿ç•™ä¸¤ä½å°æ•°
	var avgNum = (sum / v.length).toFixed(2)
	compare.push({provice:k , avg:avgNum})
}
```

`forEach`ï¼šforEachæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œï¼ˆvalueï¼Œkeyï¼Œitemï¼‰ï¼Œé»˜è®¤ä¼ å‚ä¸ºvalueã€‚å…¶ä¸­ï¼Œvalueä»£è¡¨çš„æ˜¯å…ƒç´ ï¼Œkeyä»£è¡¨çš„æ˜¯å…ƒç´ ç´¢å¼•ï¼Œå³ä¸‹æ ‡ï¼Œitemä»£è¡¨çš„æ˜¯æ•´ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡ã€‚å½“ä¼ ä¸€ä¸ªå‚æ•°æ˜¯ï¼Œä»£è¡¨çš„å°±æ˜¯å…¶æœ¬èº«ï¼›å½“ä¼ ä¸¤ä¸ªå‚æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨å…¶å…ƒç´ æœ¬èº«ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨ä¸‹æ ‡ï¼Œå½“ä¼ å‚å¯¹è±¡æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œkeyå¯¹åº”keyï¼Œvalueå¯¹åº”valueï¼Œæ‰€ä»¥ä¼ å‚ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºé”®ã€‚

**æ’åºç­›é€‰å¤„ç†ï¼š**

```js
compare.sort((a,b) =>{
    //æ ¹æ®avgå­—æ®µè¿›è¡Œæ’åº
	return b.avg - a.avg
}).splice(5)
```

***

- **ğŸ¤¨å„ä¸ªçœä»½/åœ°åŒºæ¶ˆè´¹é¢çš„ä¸­ä½æ•°**

**éœ€æ±‚åˆ†æï¼š**é€‰æ‹©å­—æ®µçœä»½/åœ°åŒºã€æ¶ˆè´¹é¢ã€‚ä¸­ä½æ•°éœ€è¦ç”¨mapæå–åˆ°æ‰€æœ‰çš„æ¶ˆè´¹é¢æ•°æ®ï¼Œç„¶åå†å¯¹æ•°ç»„è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œé¦–å…ˆå…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åå†å–åˆ°ä¸­ä½æ•°ã€‚

**æå–æ•°æ®åˆ°æ•°ç»„ä¸­ï¼š**

```js
var map1 = new Map()
data.forEach((e) =>{
    if(map1.has(e.proviceName)){  
        //å’Œç´¯åŠ ç±»ä¼¼ï¼Œåªæ˜¯æ­¤æ—¶ä¼ å…¥çš„mapå¯¹è±¡ä¸­ï¼Œå¯¹åº”çš„valueå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚
        var tmp1 = []
        tmp1 = map1.get(e.proviceName)
        tmp1.push(e.consumptionAmount)
        map1.set(e.proviceName , tmp1)
    }else{
        //è¿™é‡Œå¦‚æœç¬¬äºŒä½ä¸ç”¨[]åŒ…è£¹ï¼Œtmp1æ— æ³•pushä»»ä½•æ•°æ®
        //å¦‚æœè¿™é‡Œä¸ç”¨[]åŒ…è£¹ï¼Œåˆ™éœ€è¦å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥æ¥æ”¶[e.consumptionAount]
        map1.set(e.proviceName , [e.consumptionAmount])
    }
})
```

**æ’åºå¹¶æ±‚ä¸­ä½æ•°ï¼š**

```js
//tmp1æ•°ç»„ç”¨æ¥æ‹¿åˆ°å‰äº”çœä»½çš„ä¸­ä½æ•°
var tmp1 = []
map1.forEach((v,k) =>{
	//æ’åºæ“ä½œ
	v.sort((a,b) =>{
		return b - a
	})
    //æ±‚ä¸­ä½æ•°
    v.every(() =>{
        //å¦‚æœæ˜¯å–ä½™ä¸ºå¶æ•°ï¼Œåˆ™ä¸­ä½æ•°ä¸ºå–å•†å’Œå•†å°ä¸€ä½çš„æ•°å€¼ç›¸åŠ æ±‚å¹³å‡å€¼
        if(v.length % 2 == 0){
            var tmp2 = ((v[v.length / 2] + v[v.length / 2 - 1]) / 2).toFixed(2)
            tmp1.push({province:k , mid:tmp2})
            return false
        }else{
            var tmp2 = v[Math.floor(v.length / 2).toFixed(2)]
            tmp1.push({province:k , mid:tmp2})
            //forEachéå†æ²¡æœ‰breakå’Œcontinueï¼Œå¯ä»¥ä½¿ç”¨everyè¿›è¡Œä»£æ›¿ï¼Œreturn falseè¿”å›falseï¼Œç­‰æ•ˆäºbreak
            return false
        }
    })
})
```

`break`ï¼šforEachéå†æ–¹æ³•ä¸­ä¸æ”¯æŒbreakå’Œcontinueï¼Œå¦‚æœéœ€è¦ä½¿ç”¨continueæ—¶ï¼Œå¯ä»¥é‡‡ç”¨return falseæˆ–return trueä»£æ›¿ï¼Œå¦‚æœè¦ä½¿ç”¨breakæ—¶ï¼Œå¯ä»¥ä½¿ç”¨try catchæˆ–everyæˆ–someä»£æ›¿ã€‚å®æµ‹return falseå¯ä»¥è¾¾åˆ°breakè¦æ±‚ã€‚

**æ’åºç­›é€‰å¤„ç†ï¼š**

```js
tmp1.sort((a,b) =>{
	return b.mid - a.mid
}).splice(5)
```

***

##### ğŸ˜å…¨å±€æ ·å¼

- **xAxis**

`type`ï¼šcategory / value

`data`ï¼šxdata / âŒ

`axisLabel`ï¼šrotate:50 / fontSize:18 

- **yAxis**

`type`ï¼šcategory / value

`data`ï¼šxdata / âŒ

`scale`ï¼štrue

- **series**

`type`ï¼šbar

`data`ï¼šydata

`label`ï¼šshow:true / position:direction

****

***

#### ğŸš©æŠ˜çº¿å›¾

***

##### ğŸ˜‚æ•°æ®å¤„ç†

- **ğŸ˜Œæ¯å¹´ä¸Šæ¶å•†å“æ•°é‡å˜åŒ–**

**æ•°æ®åˆ†æï¼š**å­—æ®µé€‰æ‹©å¹´ä»½ã€å•†å“åç­‰ä»»æ„å­—æ®µã€‚ç›¸å¯¹äºä½¿ç”¨è®¡æ•°çš„æ–¹æ³•ï¼Œå…¶å®é€šè¿‡mapå¯¹è±¡ä¸­getæ–¹æ³•ç»Ÿè®¡å‡ºç°æ¬¡æ•°ï¼Œç„¶åç»Ÿè®¡mapå¯¹è±¡ä¸­æ•°ç»„çš„é•¿åº¦ï¼Œå³å¯è¾¾åˆ°ç»Ÿè®¡ä¸Šæ¶å•†å“æ•°é‡çš„å˜åŒ–ã€‚

**ç»Ÿè®¡å„å¹´ä»½æ•°æ®ï¼š**

```js
var map1 = new Map()
data.forEach((e) =>{
	if(map1.has(e.year)){
        var tmp1 = []
    	tmp1 = map1.get(e.year)
        tmp1.push(e.id)
        map1.set(e.year , tmp1)
    }else
        map1.set(e.year , [e.id])
})
```

**ç»Ÿè®¡é•¿åº¦ï¼š**

```js
var xdata = []
var ydata = []
map.forEach((v,k) =>{
	xdata.push(k)
	ydata.push(v.length)
})
```

***

##### ğŸ¤ªå…¨å±€æ ·å¼

- **xAxis**

`type`ï¼šcategory 

`data`ï¼šxdata 

`axisLabel`ï¼šrotate:50 / fontSize:18 

- **yAxis**

`type`ï¼š value

`data`ï¼šxdata

`scale`ï¼štrue

- **series**

`type`ï¼šline

`data`ï¼šydata

`label`ï¼šshow:true / position:direction

***

***

#### ğŸš©æŠ˜æŸ±æ··åˆå›¾

***

##### ğŸ˜æ•°æ®å¤„ç†

- **ğŸ¤¯æŸ±çŠ¶å›¾è¡¨ç¤ºå‰äº”çœä»½å¹³å‡æ¶ˆè´¹é¢ï¼ŒæŠ˜çº¿å›¾è¡¨ç¤ºå¯¹åº”åœ°åŒºçš„å¹³å‡æ¶ˆè´¹é¢**

**éœ€æ±‚åˆ†æï¼š**å­—æ®µé€‰æ‹©çœä»½ã€åœ°åŒºã€æ¶ˆè´¹é¢ã€‚æœ¬é¢˜éš¾ç‚¹ä¸ºå¦‚ä½•å¯¹åº”çœä»½å’Œåœ°åŒºï¼Œå› ä¸ºå¯¹åº”ï¼ˆä¸»é”®ï¼‰å­—æ®µä¸ºçœä»½å­—æ®µï¼Œæ‰€ä»¥æ ¹æ®çœä»½æ¥è¿›è¡Œç­›é€‰ã€‚map1:{çœä»½ => çœä»½æ€»é¢}ï¼Œmap2:{åœ°åŒº => åœ°åŒºæ€»é¢}ï¼Œmap3:{åœ°åŒº => åœ°åŒºå†…çœä»½ä¸ªæ•°}ã€‚ç”¨map1å¯¹è±¡è¿›è¡Œéå†ï¼Œç›®æ ‡å€¼æ˜¯æ‹¿åˆ°æ¯ä¸€ä¸ªçœä»½çš„åå­—ï¼Œå†æ¬¡å¯¹å…ƒæ•°æ®è¿›è¡Œéå†ï¼Œå¦‚æœçœä»½idå’Œå…ƒæ•°æ®ä¸­çš„çœä»½idç›¸ç­‰æ—¶ï¼Œé‚£ä¹ˆå¯¹çœä»½è®¡æ•°ï¼ŒåŒæ—¶æå–å‡ºå…ƒæ•°æ®ä¸­çš„åœ°åŒºåç§°ã€‚å°†åœ°åŒºæ”¾å…¥map2å’Œmap3ä¸­è¿›è¡Œå¯¹åº”è®¡ç®—å¹³å‡æ¶ˆè´¹é¢ï¼Œæ ¹æ®çœä»½è®¡æ•°å’Œmap1ä¸­çš„çœä»½æ€»é”€å”®é¢è¿›è¡Œè®¡ç®—å¹³å‡æ¶ˆè´¹é¢ã€‚

**map1ï¼š**

```js
var map1 = new Map()
tmp1.forEach((e) =>{
	if(map1.has(e.province)){
        tmp1.set(e.province , tmp1.get(e.province) + e.finalTotalAmount)
    }else{
		tmp1.set(e.province , e.finalTotalAmount)
    }
})
```

**map2å’Œmap3ï¼š**

```js
var map1 = new Map()
tmp1.forEach((e) =>{
	if(map1.has(e.regionName)){
        tmp2.set(e.regionName , tmp2.get(e.regionName) + e.finalTotalAmount)
        tmp3.set(e.regionName , tmp3.get(e.regionName) + 1)
    }else{
		tmp2.set(e.regionName , e.finalTotalAmount)
		tmp3.set(e.regionName , Number(1))
    }
})
```

**å¯¹åº”çœä»½å’Œåœ°åŒºå¹¶æ±‚å¹³å‡æ¶ˆè´¹é¢ï¼š**

```js
var res = []
map1.for((v,k) =>{
    //ç¬¬ä¸€æ­¥æ˜¯æå–éœ€è¦çš„æ•°æ®
    //æå–çœä»½
    var pro = k
    //å®šä¹‰è®¡æ•°å™¨
    var count = 0
    //å®šä¹‰ä¸€ä¸ªåœ°åŒºå€¼ç”¨äºæ¥æ”¶â€œçœä»½å¯¹åº”åœ°åŒºâ€
    var reg_compare
    //æå–çœä»½å¯¹åº”æ¶ˆè´¹æ€»é¢ï¼Œè®¡ç®—éœ€è¦ä½¿ç”¨
    var pro_v = v
    //è¿›å…¥å…ƒæ•°æ®å¼€å§‹åˆ¤æ–­
   	tmp1.forEach((e) =>{
		if(e.provinceName == pro){
            count += 1
            reg_compare = e.regionName
        }
    })
    //è®¡ç®—
    var pro_avg = (pro_v / count).toFixed(2)
    var reg_avg = (map2.get(reg_compare) / map3.get(reg_compare)).toFixed(2)
    res.push({pro:pro , reg:reg_compare , pro_avg:pro_avg , reg_avg:reg_avg})
})
```

**æ’åºç­›é€‰å¤„ç†ï¼š**

```js
res.sort((a,b) =>{
    return b.pro_avg - a.pro_avg
}).splice(5)
```

***

##### ğŸ¥´å…¨å±€æ ·å¼

- **xAxis**

`type`ï¼šcategory 

`data`ï¼šxdata 

`axisLabel`ï¼šrotate:50 / fontSize:18 

- **yAxis**

`type`ï¼š value

`data`ï¼šxdata

`scale`ï¼štrue

- **legend**

`data`ï¼š[] / âŒ

- **series**

`type`ï¼šline ï¼† bar

`data`ï¼šydata

`label`ï¼šshow:true / position:direction

`name`ï¼š["å›¾ä¾‹"]

***

***

#### ğŸš©é¥¼çŠ¶å›¾

***

##### ğŸ˜œæ•°æ®å¤„ç†

- **ğŸ˜´é¥¼çŠ¶å›¾å±•ç¤ºå„åœ°åŒºæ¶ˆè´¹èƒ½åŠ›**

**éœ€æ±‚åˆ†æï¼š**æ±‚å„åœ°åŒºçš„æ¶ˆè´¹èƒ½åŠ›ï¼Œå³ä»¥åœ°åŒºä¸ºä¸»é”®å­—æ®µï¼Œç»Ÿè®¡æ­¤åœ°åŒºæ‰€æœ‰çš„æ¶ˆè´¹é‡‘é¢/

**ç»Ÿè®¡ï¼š**

```js
var map1 = new Map()
tmp1.forEach((e) =>{
	if(map1.has(e.regionName)){
        map1.set(e.regionName , map1.get(e.regionName) + e.finalTotalAmount)
    }else{
        map1.set(e.regionName , e.finalTotalAmount)
    }
})
```

***

- **ğŸ¥±ç«ç‘°å›¾å±•ç¤ºå„åœ°åŒºå¹³å‡æ¶ˆè´¹èƒ½åŠ›**

**éœ€æ±‚åˆ†æï¼š**æ±‚å„åœ°åŒºçš„æ¶ˆè´¹èƒ½åŠ›ï¼Œå³ä»¥åœ°åŒºä¸ºä¸»é”®å­—æ®µï¼Œç»Ÿè®¡æ­¤åœ°åŒºæ‰€æœ‰çš„æ¶ˆè´¹é‡‘é¢çš„å¹³å‡é¢

**æ±‚å„åœ°åŒºçš„æ¶ˆè´¹æ•°ç»„ï¼š**

```js
var map1 = new Map()
tmp1.forEach((e) =>{
	if(map1.has(e.regionName)){
        var tmp2 = []
        tmp2 = map1.get(e.regionName)
        tmp2.push(e.finalTotalAmount)
        map1.set(e.regionName , tmp2)
    }else{
        map1.set(e.regionName , [e.finalTotalAmount])
    }
})
```

**æ±‚å¹³å‡é¢ï¼š**

```js
var res = []
map1.forEach((v,k) =>{
	var sum = 0
    v.forEach(() =>{
        sum += 1
    })
    var avg = (sum / v.length).toFixed(2)
    res.push({value:k , name:avg})
})
```

***

##### ğŸ¤¤å…¨å±€æ ·å¼

- **series**

`data`ï¼š[{valueï¼šxxï¼Œnameï¼šxx}]

`itemStyle`ï¼šnormalï¼š{labelï¼š{showï¼štrue ï¼Œ formatterï¼š" {a} {b} {c} {d}%"}}

`roseType`ï¼šradius / area

- **legend**

`data`ï¼š[] / âŒ

***

***

#### ğŸš©æ•£ç‚¹å›¾

***

##### ğŸ˜¤æ•°æ®å¤„ç†

- **ğŸ‘¹æ•£ç‚¹å›¾å±•ç¤ºæ¯å¹´ä¸Šæ¶å•†å“æ•°é‡çš„å˜åŒ–**
- **ğŸ‘ºæ•£ç‚¹å›¾å±•ç¤ºçœä»½å¹³å‡æ¶ˆè´¹é¢**

##### ğŸ˜¬å…¨å±€æ ·å¼

- **xAxis**

`type`ï¼šcategory / value

`data`ï¼šxdata 

`axisLabel`ï¼šrotate:50 / fontSize:18 

- **yAxis**

`type`ï¼š value / category

`data`ï¼šxdata

`scale`ï¼štrue

- **series**

`type`ï¼šscatter

`label`ï¼šshowï¼štrueï¼Œpositionï¼šdirection

***



### ğŸ•’å·¥ä¸š

***

***

#### ğŸ˜®â€ğŸ’¨æ•°æ®å¤„ç†æ–¹æ³•

***

##### ğŸš©å…ƒæ•°æ®ç­›é€‰

**.filter()**

```js
var dataOrigin = arr.data.filter((e) =>
	(i.ChangeStartTime.split("T")[0].split("-")[0]) == 2021 &&
    (i.ChangeStartTime.split("T")[0].split("-")[1]) == 10 &&
    (i.ChangeStartTime.split("T")[0].split("-")[2]) == 12
)
```

ç­›é€‰æ•°æ®ï¼šåœ¨å…ƒæ•°æ®ä¸­ï¼ŒChangeStartTimeå­—æ®µï¼Œå¹´ä»½ä¸º2021å¹´ï¼Œæœˆä»½ä¸º10æœˆï¼Œæ—¥æœŸä¸º12æ—¥çš„æ‰€æœ‰æ•°æ®ã€‚

`filter`ï¼šæ–¹æ³•ç”¨äºè¿‡æ»¤å…ƒç´ ï¼Œfilterçš„ç”¨æ³•å’Œmapç›¸ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œfilterä¼šæŠŠä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ç”¨äºæ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ ¹æ®è¿”å›å€¼æ˜¯trueæˆ–æ˜¯falseæ¥è¿›è¡Œåˆ¤æ–­æ˜¯ä¿ç•™æˆ–æ˜¯ä¸¢å¼ƒè¯¥å…ƒç´ ã€‚

***

##### ğŸš©æ•°æ®å»é‡

**.map()**

```js
var deduplication = new Map()
dataOrigin.forEach((e) =>{
    if(!deduplication.has(e.ChangeID)){
        deduplication.set(e.ChangeID , true)
    }
})
```

é€šè¿‡.map()æ¥è¿›è¡Œæ•°æ®çš„å»é‡ï¼Œå®šä¹‰ä¸€ä¸ªmapå¯¹è±¡ï¼Œéå†å…ƒæ•°æ®ï¼Œå¯¹mapå¯¹è±¡è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸å­˜åœ¨ChangIDï¼ˆå»é‡ä¾æ®ï¼‰ï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸€æ¡æ•°æ®å­˜å…¥mapå¯¹è±¡ä¸­ï¼ŒåŒæ—¶å®Œæˆæ•°æ®çš„è®°å½•ï¼Œå®Œæˆæ•°æ®çš„å»é‡ã€‚

***

##### ğŸš©æ—¶é—´æˆ³è½¬æ¢ä¸è®¡ç®—

> ä¸­å›½æ ‡å‡†æ—¶é—´ï¼šThu Feb 28 2019 17:11:43 GMT+0800
>
> JSé»˜è®¤ä¸­å›½æ ‡å‡†æ—¶é—´æ˜¯ GMTæ—¶é—´.ç”±äºæˆ‘ä»¬å›½å®¶é‡‡ç”¨çš„æ˜¯ä¸œå…«åŒºæ—¶é—´,å› æ­¤æ˜¯GMT +0800

> ISO8601æ ‡å‡†æ—¶é—´ï¼š2019-02-28T09:51:45.540Z
>
> å…¶ä¸­Tè¡¨ç¤ºåˆå¹¶,Zè¡¨ç¤ºUTCæ—¶é—´

> æ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æ—å¨æ²»æ—¶é—´1970å¹´01æœˆ01æ—¥00æ—¶00åˆ†00ç§’(åŒ—äº¬æ—¶é—´1970å¹´01æœˆ01æ—¥08æ—¶00åˆ†00ç§’)èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚
> javaçš„dateé»˜è®¤ç²¾åº¦æ˜¯æ¯«ç§’ï¼Œä¹Ÿå°±æ˜¯è¯´ç”Ÿæˆçš„æ—¶é—´æˆ³å°±æ˜¯13ä½çš„ï¼Œè€Œåƒc++æˆ–è€…phpç”Ÿæˆçš„æ—¶é—´æˆ³é»˜è®¤å°±æ˜¯10ä½çš„ï¼Œå› ä¸ºå…¶ç²¾åº¦æ˜¯ç§’ã€‚

```js
dataOrigin.forEach((e) =>{
	var start = new Date(e.ChangeStartTime).getTime()
    var end = new Date(e.ChangeEndTime).getTime()
    var tim = parseFloat(end - start) / 1000
})
```

new Date()ï¼šè·å–æ—¶é—´ï¼ŒDateå¯¹è±¡ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´;

getTime()ï¼šæ–¹æ³•è¿”å›ä»1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œåˆ°æŒ‡å®šæ—¥æœŸä¹‹é—´çš„æ¯«ç§’æ•°ï¼›

parseFloat()ï¼šå‡½æ•°è§£æå­—ç¬¦ä¸²å¹¶è¿”å›æµ®ç‚¹æ•°

> æè¿°ï¼š
>
> ![image-20230728170845753](T:\Web\website\source\_posts\readyRace\image-20230728170845753.png)
>
> æ­¤å‡½æ•°ç¡®å®šæŒ‡å®šå­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºæ•°å­—ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè§£æå­—ç¬¦ä¸²ç›´åˆ°åˆ°è¾¾æ•°å­—çš„æœ«å°¾ï¼Œå¹¶å°†æ•°å­—ä½œä¸ºæ•°å­—è€Œä¸æ˜¯å­—ç¬¦ä¸²è¿”å›ã€‚
>
> **æ³¨æ„ï¼š**åªè¿”å›å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼
>
> **æ³¨é‡Šï¼š**å…è®¸å‰å¯¼å’Œå°¾éšç©ºæ ¼ã€‚
>
> **æ³¨é‡Šï¼š**å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½è½¬æ¢ä¸ºæ•°å­—ï¼Œ`parseFloat()` è¿”å› NaNã€‚

***

##### ğŸš©æ•°æ®keyå¦‚ä½•èµ‹å€¼ä¸ºç©º

åœ¨è¿›è¡Œæ•°æ®å¤„ç†æ—¶ï¼Œä¼šå‡ºç°ä¸åŒçš„å¯¹è±¡å¯¹åº”çš„å€¼ä¸ä¸€æ ·ã€‚

æ¯”å¦‚æ±‚æŸä¸ªè®¾å¤‡å„ä¸ªçŠ¶æ€ä¸‹çš„æŒç»­æ—¶é•¿ï¼Œå¯èƒ½å°±ä¼šå‡ºç°æŸå°è®¾å¤‡æ²¡æœ‰æŸä¸ªçŠ¶æ€ï¼Œé‚£ä¹ˆé€šè¿‡mapå¯¹è±¡setåˆ°çš„æ–¹æ³•ï¼Œå°±ä¸ä¼šæ˜¾ç¤ºè¿™ä¸€ä¸ªçŠ¶æ€çš„ä»»ä½•æ•°æ®ã€‚

é‚£ä¹ˆï¼Œé€šè¿‡æå‰å­˜å…¥map(key => value)ï¼Œå°±å¯ä»¥é¿å…æ­¤é—®é¢˜ï¼Œå¦‚æœå‡ºç°äº†å¯¹åº”æ•°æ®ï¼Œé‚£ä¹ˆåˆ™ä¼šæ˜¾ç¤ºä½ å­˜å…¥çš„æ•°æ®valueã€‚

```js
var run = new Map()
var stand = new Map()
var stop = new Map()
tmp1.forEach((e) =>{
	run.set(e.machine , 0)
	stand.set(e.machine , 0)
	stop.set(e.machine , 0)
})
```

é€šè¿‡setæå‰å­˜å…¥æ•°æ®ï¼Œmapåˆ™ä¼šå¦‚ä»¥ä¸‹å½¢å¼ï¼Œè¿™æ ·å³ä½¿åœ¨åç»­å¤„ç†ä¸­ï¼ŒæŸå°è®¾å¤‡æ²¡æœ‰æ­¤çŠ¶æ€çš„ä»»ä½•æ•°æ®ï¼Œä¹Ÿä¸ä¼šå¿½ç•¥æ­¤æ¡æ•°æ®ï¼Œè€Œæ˜¯å­˜å…¥äº†ï¼ˆkey => 0ï¼‰æ­¤æ¡æ•°æ®ï¼Œé¿å…äº†åç»­æ‰‹åŠ¨æ’å…¥æ•°æ®çš„éº»çƒ¦ã€‚

map(

{machine1 => 0}ï¼Œ

{machine2 => 0}ï¼Œ

{machine3 => 0})

***

##### ğŸš©datasetæ•°æ®é›†ä½¿ç”¨æƒ…å†µ

ç›®å‰æ¥è¯´ï¼Œå”¯ä¸€æ¨èä½¿ç”¨æ•°æ®é›†çš„åœ°æ–¹æ˜¯å¤šæ¡æ•°æ®ã€æ•°æ®æˆè¡¨çš„æ ¼å¼æ•°æ®ã€‚å…¶ä»–æš‚æ—¶ä¸è€ƒè™‘ä½¿ç”¨`dataset`

```
dataset:{
	source:[data1,data2,data3]
}
```

> æ•°æ®é›†ç¤ºä¾‹ï¼š
>
> ![image-20230728164836822](T:\Web\website\source\_posts\readyRace\image-20230728164836822.png)
>
> data1ä¸ºæ•°æ®å¤´ï¼Œæ•°æ®å¤´åœ¨ç”Ÿæˆå›¾è¡¨åä¸ºå›¾ä¾‹ï¼Œè¯»å–æ•°æ®æ–¹å¼ä¸ºä»ä¸Šåˆ°ä¸‹ï¼›
>
> data2ä¸ºæ•°æ®é›†ï¼Œæ•°æ®é›†ä¸­çš„å¤´éƒ¨ä¸ºå›¾è¡¨æ¨ªåæ ‡ï¼›

å¦‚æœä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶çš„å›¾ï¼Œå»ºè®®ç›´æ¥ç»˜åˆ¶ï¼Œé‡‡ç”¨dataçš„æ–¹å¼å»å¯¼å…¥æ•°æ®ï¼Œè€Œä¸é‡‡ç”¨æ•°æ®é›†

***

##### ğŸš©å…³äºæ‹¼æ¥æ¯”è¾ƒ

æ‹¼æ¥æ¯”è¾ƒçš„ç›®çš„æ˜¯å¤„ç†éƒ¨åˆ†å†…å®¹æ•°æ®ï¼Œæ€è·¯æ˜¯å…ˆåœ¨å¤„ç†åæ•°ç»„ä¸­å°†éœ€è¦ä¿ç•™çš„å­—æ®µè¿›è¡Œæ‹¼æ¥ï¼Œç„¶åå¦ä¸€ä¸ªæ–°æ•°ç»„ä¹ŸåŒæ—¶è·å–è¿™ä¸ªæ¯”è¾ƒå­—æ®µï¼ŒåŒæ—¶å¢åŠ æ–°å­—æ®µï¼Œæ–°å­—æ®µå°±æ˜¯æˆ‘ä»¬éœ€è¦å¤„ç†çš„éƒ¨åˆ†å†…å®¹æ•°æ®ï¼Œæ­¤æ—¶ç›¸æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ï¼Œæ ¹æ®æ•°ç»„çš„å±æ€§ï¼ˆå¦‚å‡ºç°æ¬¡æ•°ï¼Œæ˜¯å¦å­˜åœ¨ï¼‰æ¥å¯¹å†…å®¹æ•°æ®è¿›è¡Œå¤„ç†ï¼ˆå¦‚å¢åˆ æŸ¥æ”¹ï¼Œç´¯åŠ ï¼Œèµ‹å€¼ï¼‰ã€‚

ä¸¾ä¸ªä¾‹å­â‘§ğŸ™‹ğŸŒ°ï¼š

**æ¯æ—¥å„è½¦é—´å¹³å‡è¿è¡Œæ—¶é•¿**

æ­¤æ—¶ï¼Œéœ€è¦æŠ½å–çš„æ•°æ®ä¸ºæ—¥æœŸä¿¡æ¯ï¼Œè½¦é—´ä¿¡æ¯ï¼Œè¿è¡ŒçŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠæ—¶é•¿æ•°æ®ã€‚éœ€è¦å¤„ç†çš„æ˜¯æ—¶é•¿ï¼Œä½†æ˜¯å¤„ç†çš„æ–¹å¼åªèƒ½æ˜¯ä¸€å¯¹ä¸€ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å°†æ—¥æœŸä¿¡æ¯å’Œè½¦é—´ä¿¡æ¯è¿›è¡Œæ‹¼æ¥æ¥å¤„ç†æ—¶é•¿æ•°æ®ã€‚

```js
let tempArr = [];
          for (let i in state.sumda) {
            let list = state.sumda[i];
            if (!(list.ChangeTime && list.MachineFactory)) {
              // å¦‚æœ 20GP
              continue;
            } else {
              let compare = {
                type: list.ChangeTime + " " + list.MachineFactory,
              }; //ä½œæ¯”è¾ƒçš„å¯¹è±¡ (å› ä¸ºæˆ‘éœ€è¦è¿™ç§æ ¼å¼ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ ¼å¼)
              if (tempArr.length == 0) {
                //è¿™æ®µä»£ç å¿…é¡»è¦å†™
                let num = Number(list.times);
                let cou = Number(list.count);
                // console.log(num);
                // console.log(cou);
                let obj = {
                  type: list.ChangeTime + " " + list.MachineFactory,
                  total: num,
                  count: cou,
                };
                tempArr.push(obj);
                // console.log(tempArr,"0000000");
              } else {
                let flag = true;
                for (let j in tempArr) {
                  //è¿™ä¸ªå¾ªç¯åªåšä¸€ä¸ªæ“ä½œï¼Œæœ‰ç›¸åŒç±»å‹çš„å°±è¿›è¡Œç»Ÿè®¡
                  if (tempArr[j]["type"] == compare.type) {
                    tempArr[j]["total"] += Number(list.times);
                    tempArr[j]["count"] += Number(list.count);
                    flag = false; //å·²ç»ç»Ÿè®¡è¿‡çš„ï¼Œå°±ä¸è¦å†é‡å¤äº†
                    break;
                  }
                }
                if (flag) {
                  //å¦‚æœæ²¡æœ‰è¿™ç§ç±»å‹çš„ï¼Œå°±pushè¿›å»
                  let num = Number(list.times);
                  let cou = Number(list.count);
                  var obj = {
                    type: list.ChangeTime + " " + list.MachineFactory,
                    total: num,
                    count: cou,
                  };
                  tempArr.push(obj);
                  console.log(tempArr);
                }
              }
            }
          }
          console.log(tempArr);
```

***

##### ğŸš©åˆ é™¤æˆ–æ·»åŠ æŒ‡å®šå…ƒç´ 

**.splice()**























## ğŸ¥ˆé›†ç¾¤æ­å»º